---
interface Card {
  title: string;
  description: string;
  stepNumber: number;
  image?: string;
  type: "dashboard" | "video" | "icons" | "photo";
}

interface Props {
  title?: string;
  description?: string;
  cards?: Card[];
  tallCard?: {
    icon: string;
    value: string;
    label: string;
    description: string;
    ctaLabel: string;
    ctaHref: string;
  };
}

const defaultCards: Card[] = [
  {
    title: "Apply in minutes",
    description:
      "Submit your basic info and property details through our secure online application.",
    stepNumber: 1,
    image:
      "/made-easy/friends-looking-at-the-restaurant-menu-2026-01-08-22-27-51-utc.jpg",
    type: "photo",
  },
  {
    title: "Instant valuation",
    description:
      "We use local Denver market data to determine your home's equity in real-time.",
    stepNumber: 2,
    image:
      "/made-easy/architects-are-reviewing-plans-together-buildings-2026-01-07-01-00-06-utc.jpg",
    type: "photo",
  },
  {
    title: "E-sign your documents",
    description:
      "Review your terms and sign everything digitally from the comfort of your home.",
    stepNumber: 3,
    image:
      "/made-easy/top-view-of-business-people-putting-their-hands-on-2026-01-08-07-14-39-utc.jpg",
    type: "photo",
  },
  {
    title: "Get your funds",
    description:
      "Once approved, your line of credit is ready to use for home improvements, debt, or more.",
    stepNumber: 4,
    image:
      "/made-easy/overjoyed-black-woman-holding-money-cash-in-hands-2026-01-08-23-10-47-utc.jpg",
    type: "photo",
  },
];

const defaultTallCard = {
  icon: "fa-solid fa-house-chimney-user",
  value: "Get Started",
  label: "Apply for Your HELOC",
  description:
    "Take the first step toward financial flexibility. Fill out our quick form and unlock the equity in your Colorado home today.",
  ctaLabel: "Fill out the form",
  ctaHref: "#hero-form-section",
};

const {
  title = "HELOCs made easy.",
  description = "Our streamlined digital process helps you access your home's equity in record time with minimal paperwork.",
  cards = defaultCards,
  tallCard = defaultTallCard,
} = Astro.props as Props;
---

<section class="component-we-make-that-easy bg-white py-24 font-sans">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-20">
      <h2
        class="text-[44px] leading-tight font-bold text-black mb-4 tracking-tight"
      >
        {title}
      </h2>
      <p class="mx-auto max-w-2xl text-[17px] text-[#666] leading-relaxed">
        {description}
      </p>
    </div>

    <div class="grid gap-6 lg:grid-cols-3 items-stretch">
      <!-- Column 1 -->
      <div class="flex flex-col gap-6">
        {/* Card 1: Photo */}
        <div
          class="flex-1 flex flex-col rounded-[32px] bg-[#f9f9f9] p-8 transition-all hover:bg-[#f0f0f0]"
        >
          <div
            class="aspect-[1.4] w-full rounded-2xl overflow-hidden mb-8 shadow-sm"
          >
            <img
              src={cards[0].image}
              class="h-full w-full object-cover"
              alt="Homeowners filling out HELOC application information"
            />
          </div>
          <div>
            <div
              class="flex items-center gap-3 mb-2 text-[#ccc] font-bold text-[11px]"
            >
              <span>0{cards[0].stepNumber}</span>
              <div class="h-[1px] flex-1 bg-[#eee]"></div>
            </div>
            <h3 class="text-[20px] font-bold text-black leading-tight mb-2">
              {cards[0].title}
            </h3>
            <p class="text-[14px] leading-relaxed text-[#666]">
              {cards[0].description}
            </p>
          </div>
        </div>

        {/* Card 3: Photo */}
        <div
          class="flex-1 flex flex-col rounded-[32px] bg-[#f9f9f9] p-8 transition-all hover:bg-[#f0f0f0]"
        >
          <div
            class="aspect-[1.4] w-full rounded-2xl overflow-hidden mb-8 shadow-sm"
          >
            <img
              src={cards[2].image}
              class="h-full w-full object-cover"
              alt="Reviewing HELOC loan terms and conditions"
            />
          </div>
          <div>
            <div
              class="flex items-center gap-3 mb-2 text-[#ccc] font-bold text-[11px]"
            >
              <span>0{cards[2].stepNumber}</span>
              <div class="h-[1px] flex-1 bg-[#eee]"></div>
            </div>
            <h3 class="text-[20px] font-bold text-black leading-tight mb-2">
              {cards[2].title}
            </h3>
            <p class="text-[14px] leading-relaxed text-[#666]">
              {cards[2].description}
            </p>
          </div>
        </div>
      </div>

      <!-- Column 2 -->
      <div class="flex flex-col gap-6">
        {/* Card 2: Photo */}
        <div
          class="flex-1 flex flex-col rounded-[32px] bg-[#f9f9f9] p-8 transition-all hover:bg-[#f0f0f0]"
        >
          <div
            class="aspect-[1.4] w-full rounded-2xl overflow-hidden mb-8 shadow-sm"
          >
            <img
              src={cards[1].image}
              class="h-full w-full object-cover"
              alt="Property analysis for equity valuation in Colorado"
            />
          </div>
          <div>
            <div
              class="flex items-center gap-3 mb-2 text-[#ccc] font-bold text-[11px]"
            >
              <span>0{cards[1].stepNumber}</span>
              <div class="h-[1px] flex-1 bg-[#eee]"></div>
            </div>
            <h3 class="text-[20px] font-bold text-black leading-tight mb-2">
              {cards[1].title}
            </h3>
            <p class="text-[14px] leading-relaxed text-[#666]">
              {cards[1].description}
            </p>
          </div>
        </div>

        {/* Card 4: Photo */}
        <div
          class="flex-1 flex flex-col rounded-[32px] bg-[#f9f9f9] p-8 transition-all hover:bg-[#f0f0f0]"
        >
          <div
            class="aspect-[1.4] w-full rounded-2xl overflow-hidden mb-8 shadow-sm"
          >
            <img
              src={cards[3].image}
              class="h-full w-full object-cover"
              alt="Happy homeowner receiving HELOC funds"
            />
          </div>
          <div>
            <div
              class="flex items-center gap-3 mb-2 text-[#ccc] font-bold text-[11px]"
            >
              <span>0{cards[3].stepNumber}</span>
              <div class="h-[1px] flex-1 bg-[#eee]"></div>
            </div>
            <h3 class="text-[20px] font-bold text-black leading-tight mb-2">
              {cards[3].title}
            </h3>
            <p class="text-[14px] leading-relaxed text-[#666]">
              {cards[3].description}
            </p>
          </div>
        </div>
      </div>

      <!-- Column 3 -->
      <div
        class="flex flex-col rounded-[40px] bg-[#bf9f5c] border border-[#bf9f5c]/20 p-10 text-center shadow-[0_30px_60px_-15px_rgba(0,0,0,0.1)]"
      >
        <div
          class="flex-1 flex flex-col items-center justify-center py-12 getStartedWrapper sticky top-24 self-start"
        >
          <div
            class="h-20 w-20 rounded-3xl bg-white flex items-center justify-center text-[#09143e] text-3xl mb-12 shadow-2xl"
          >
            <i class={tallCard.icon}></i>
          </div>
          <div class="mb-8">
            <span
              class="text-[48px] font-bold tracking-tighter text-white leading-none"
              >{tallCard.value}</span
            >
            <p
              class="text-[12px] font-bold uppercase tracking-[0.2em] text-white/80 mt-2"
            >
              {tallCard.label}
            </p>
          </div>
          <p class="text-[16px] leading-relaxed text-white/90 mb-12">
            {tallCard.description}
          </p>
          <a
            href={tallCard.ctaHref}
            class="inline-block w-full rounded-full bg-[#09143e] py-5 text-[14px] font-bold text-white transition-all hover:bg-[#0f1d4d] active:scale-95"
            data-scroll-to-form>{tallCard.ctaLabel}</a
          >
        </div>
      </div>
    </div>
  </div>
</section>

<script is:inline>
  document.querySelectorAll("[data-scroll-to-form]").forEach((button) => {
    button.addEventListener("click", (e) => {
      e.preventDefault();
      const targetId = button.getAttribute("href");
      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        const offset = 100; // Account for fixed header if present
        const elementPosition = targetElement.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - offset;

        window.scrollTo({
          top: offsetPosition,
          behavior: "smooth",
        });
      }
    });
  });
</script>
