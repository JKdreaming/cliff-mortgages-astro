---
interface Card {
  title: string;
  description: string;
  stepNumber: number;
  image?: string;
  type: "dashboard" | "video" | "icons" | "photo";
}

interface Props {
  title?: string;
  description?: string;
  cards?: Card[];
  tallCard?: {
    icon: string;
    value: string;
    label: string;
    description: string;
    ctaLabel: string;
    ctaHref: string;
  };
}

const defaultCards: Card[] = [
  {
    title: "Apply in minutes",
    description:
      "Submit your basic info and property details through our secure online application.",
    stepNumber: 1,
    type: "dashboard",
  },
  {
    title: "Instant valuation",
    description:
      "We use local Denver market data to determine your home's equity in real-time.",
    stepNumber: 2,
    image:
      "https://images.unsplash.com/photo-1580587767303-944994af914a?auto=format&fit=crop&q=80&w=400",
    type: "video",
  },
  {
    title: "E-sign your documents",
    description:
      "Review your terms and sign everything digitally from the comfort of your home.",
    stepNumber: 3,
    type: "icons",
  },
  {
    title: "Get your funds",
    description:
      "Once approved, your line of credit is ready to use for home improvements, debt, or more.",
    stepNumber: 4,
    image:
      "https://images.unsplash.com/photo-1564013799919-ab600027ffc6?auto=format&fit=crop&q=80&w=400",
    type: "photo",
  },
];

const defaultTallCard = {
  icon: "fa-solid fa-house-chimney-user",
  value: "1,000,000-",
  label: "Equity Unlocked",
  description:
    "Join the thousands of Colorado homeowners who have used Cliff to access their home's value.",
  ctaLabel: "Fill out the form",
  ctaHref: "#hero-form-section",
};

const {
  title = "HELOCs made easy.",
  description = "Our streamlined digital process helps you access your home's equity in record time with minimal paperwork.",
  cards = defaultCards,
  tallCard = defaultTallCard,
} = Astro.props as Props;
---

<section class="component-we-make-that-easy bg-white py-24 font-sans">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-20">
      <h2
        class="text-[44px] leading-tight font-bold text-black mb-4 tracking-tight"
      >
        {title}
      </h2>
      <p class="mx-auto max-w-2xl text-[17px] text-[#666] leading-relaxed">
        {description}
      </p>
    </div>

    <div class="grid gap-6 lg:grid-cols-3 items-stretch">
      <!-- Column 1 -->
      <div class="flex flex-col gap-6">
        {/* Card 1: Dashboard */}
        <div
          class="flex-1 flex flex-col rounded-[32px] bg-[#f9f9f9] p-8 transition-all hover:bg-[#f0f0f0]"
        >
          <div
            class="aspect-[1.4] w-full rounded-2xl bg-white mb-8 p-6 flex flex-col justify-center border border-[#eee] relative overflow-hidden shadow-sm"
          >
            <div class="h-2 w-1/4 bg-[#f0f0f0] rounded-full mb-4"></div>
            <div
              class="h-10 w-full bg-[#f9f9f9] rounded-xl mb-6 flex items-center justify-between px-4 border border-[#eee]"
            >
              <div class="flex items-center gap-2">
                <div class="h-4 w-4 rounded-full bg-blue-500/10"></div>
                <div class="h-1.5 w-20 bg-[#eee] rounded-full"></div>
              </div>
              <div class="h-1.5 w-12 bg-[#eee] rounded-full"></div>
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div
                class="h-16 bg-[#f9f9f9] rounded-xl border border-[#eee] p-3 flex flex-col justify-end"
              >
                <div class="h-1 w-full bg-[#eee] rounded-full"></div>
              </div>
              <div
                class="h-16 bg-[#f9f9f9] rounded-xl border border-[#eee] p-3 flex flex-col justify-end"
              >
                <div class="h-1 w-full bg-[#eee] rounded-full"></div>
              </div>
            </div>
          </div>
          <div>
            <div
              class="flex items-center gap-3 mb-2 text-[#ccc] font-bold text-[11px]"
            >
              <span>0{cards[0].stepNumber}</span>
              <div class="h-[1px] flex-1 bg-[#eee]"></div>
            </div>
            <h3 class="text-[20px] font-bold text-black leading-tight mb-2">
              {cards[0].title}
            </h3>
            <p class="text-[14px] leading-relaxed text-[#666]">
              {cards[0].description}
            </p>
          </div>
        </div>

        {/* Card 3: Icons */}
        <div
          class="flex-1 flex flex-col rounded-[32px] bg-[#f9f9f9] p-8 transition-all hover:bg-[#f0f0f0]"
        >
          <div
            class="aspect-[1.4] w-full rounded-2xl bg-white mb-8 flex items-center justify-center gap-6 border border-[#eee] shadow-sm"
          >
            <div
              class="h-16 w-16 rounded-2xl bg-[#f9f9f9] border border-[#eee] flex items-center justify-center text-[#ccc] text-2xl shadow-sm"
            >
              <i class="fa-solid fa-file-invoice"></i>
            </div>
            <div
              class="h-16 w-16 rounded-2xl bg-[#f9f9f9] border border-[#eee] flex items-center justify-center text-[#ccc] text-2xl shadow-sm"
            >
              <i class="fa-solid fa-house-circle-check"></i>
            </div>
          </div>
          <div>
            <div
              class="flex items-center gap-3 mb-2 text-[#ccc] font-bold text-[11px]"
            >
              <span>0{cards[2].stepNumber}</span>
              <div class="h-[1px] flex-1 bg-[#eee]"></div>
            </div>
            <h3 class="text-[20px] font-bold text-black leading-tight mb-2">
              {cards[2].title}
            </h3>
            <p class="text-[14px] leading-relaxed text-[#666]">
              {cards[2].description}
            </p>
          </div>
        </div>
      </div>

      <!-- Column 2 -->
      <div class="flex flex-col gap-6">
        {/* Card 2: Video */}
        <div
          class="flex-1 flex flex-col rounded-[32px] bg-[#f9f9f9] p-8 transition-all hover:bg-[#f0f0f0]"
        >
          <div
            class="relative aspect-[1.4] w-full rounded-2xl overflow-hidden mb-8 shadow-sm group"
          >
            <img
              src={cards[1].image}
              class="h-full w-full object-cover transition-transform group-hover:scale-105"
              alt=""
            />
            <div
              class="absolute inset-0 bg-black/10 flex items-center justify-center"
            >
              <div
                class="h-12 w-12 rounded-full bg-white/95 flex items-center justify-center text-black shadow-xl backdrop-blur-sm transition-transform group-hover:scale-110"
              >
                <i class="fa-solid fa-play text-sm translate-x-0.5"></i>
              </div>
            </div>
          </div>
          <div>
            <div
              class="flex items-center gap-3 mb-2 text-[#ccc] font-bold text-[11px]"
            >
              <span>0{cards[1].stepNumber}</span>
              <div class="h-[1px] flex-1 bg-[#eee]"></div>
            </div>
            <h3 class="text-[20px] font-bold text-black leading-tight mb-2">
              {cards[1].title}
            </h3>
            <p class="text-[14px] leading-relaxed text-[#666]">
              {cards[1].description}
            </p>
          </div>
        </div>

        {/* Card 4: Photo */}
        <div
          class="flex-1 flex flex-col rounded-[32px] bg-[#f9f9f9] p-8 transition-all hover:bg-[#f0f0f0]"
        >
          <div
            class="aspect-[1.4] w-full rounded-2xl overflow-hidden mb-8 shadow-sm"
          >
            <img
              src={cards[3].image}
              class="h-full w-full object-cover"
              alt=""
            />
          </div>
          <div>
            <div
              class="flex items-center gap-3 mb-2 text-[#ccc] font-bold text-[11px]"
            >
              <span>0{cards[3].stepNumber}</span>
              <div class="h-[1px] flex-1 bg-[#eee]"></div>
            </div>
            <h3 class="text-[20px] font-bold text-black leading-tight mb-2">
              {cards[3].title}
            </h3>
            <p class="text-[14px] leading-relaxed text-[#666]">
              {cards[3].description}
            </p>
          </div>
        </div>
      </div>

      <!-- Column 3 -->
      <div
        class="flex flex-col rounded-[40px] bg-white border border-[#eee] p-10 text-center shadow-[0_30px_60px_-15px_rgba(0,0,0,0.05)]"
      >
        <div class="flex-1 flex flex-col items-center justify-center py-12">
          <div
            class="h-20 w-20 rounded-3xl bg-black flex items-center justify-center text-white text-3xl mb-12 shadow-2xl"
          >
            <i class={tallCard.icon}></i>
          </div>
          <div class="mb-8">
            <span
              class="text-[64px] font-bold tracking-tighter text-black leading-none"
              >{tallCard.value}</span
            >
            <p
              class="text-[12px] font-bold uppercase tracking-[0.2em] text-[#bbb] mt-2"
            >
              {tallCard.label}
            </p>
          </div>
          <p class="text-[16px] leading-relaxed text-[#666] mb-12">
            {tallCard.description}
          </p>
          <a
            href={tallCard.ctaHref}
            class="inline-block w-full rounded-full bg-black py-5 text-[14px] font-bold text-white transition-all hover:bg-[#333] active:scale-95"
            data-scroll-to-form>{tallCard.ctaLabel}</a
          >
        </div>
      </div>
    </div>
  </div>
</section>

<script is:inline>
  document.querySelectorAll("[data-scroll-to-form]").forEach((button) => {
    button.addEventListener("click", (e) => {
      e.preventDefault();
      const targetId = button.getAttribute("href");
      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        const offset = 100; // Account for fixed header if present
        const elementPosition = targetElement.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - offset;

        window.scrollTo({
          top: offsetPosition,
          behavior: "smooth",
        });
      }
    });
  });
</script>
